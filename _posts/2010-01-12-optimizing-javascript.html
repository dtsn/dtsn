--- 
meta: 
  image: /var/www/wp-uploads/dtsn.co.uk/2010/01/js.png
  _edit_lock: "1271877762"
  _clicky_tweetpost: ""
  _clicky_goal: a:2:{s:2:"id";s:0:"";s:5:"value";s:0:"";}
  _edit_last: "2"
title: Optimizing JavaScript
published: true
tags: 
- JavaScript
- Optimization
- Performance
layout: post
type: post
status: publish
---
<p>JavaScript is in the middle of a massive comeback and developers are abusing it. JavaScript addons and widgets are becoming are the norm for large sites and are so easy to install, in large numbers and quantities. For example <a href="http://mashable.com">Mashable</a> loads nearly a mega byte in JavaScript files. In this article I will go through some tips to help you optimize your JavaScript and reduce both the load on your servers and make your pages respond faster.</p> 
<p><img style="border-bottom: 0px; border-left: 0px; display: inline; margin-left: 0px; border-top: 0px; margin-right: 0px; border-right: 0px" title="js" border="0" alt="js" src="http://dtsn.co.uk/wp-uploads/2010/01/js-thumb.png" width="480" height="200" /></p> <h2>Cut code</h2>  <p>The first and biggest thing you should do in optimizing your JavaScript is to cut down on the size, cut out functions that don’t do a lot and try and reduce the size of your file. This goes along side with the question <strong>do you need a framework</strong>? Think it through, is your site big enough to warrant loading a full framework (typically in excess of 3000 lines), if you just want to do some very simple functions write them in JavaScript without a framework.</p>  <p>If you really need to load a framework use the ones available on the <a href="http://code.google.com/apis/ajaxlibs/documentation/">Google AJAX libraries API</a>, most frameworks are available. These are just the frameworks hosted on Google, they work of the principle that if one website uses these files then the user will still have the files in the browser cache and won’t need load them again.</p>  <h3>Minimize </h3>  <p>Run your code through a JavaScript minimiser, this will shrink all the files to be really small there are a number of popular ones available (this is also applicable for CSS):</p>  <ul>   <li>Bundle Fu - <a title="http://code.google.com/p/bundle-fu/" href="http://code.google.com/p/bundle-fu/">http://code.google.com/p/bundle-fu/</a> </li>    <li>Pack:tag - <a title="http://sourceforge.net/projects/packtag/" href="http://sourceforge.net/projects/packtag/">http://sourceforge.net/projects/packtag/</a> </li>    <li>JSMIN - <a title="http://www.crockford.com/javascript/jsmin.html" href="http://www.crockford.com/javascript/jsmin.html">http://www.crockford.com/javascript/jsmin.html</a> </li>    <li>YUI Compressor - <a title="http://yuilibrary.com/downloads/#yuicompressor" href="http://yuilibrary.com/downloads/#yuicompressor">http://yuilibrary.com/downloads/#yuicompressor</a> </li> </ul>  <h2>Expires headers</h2>  <p>Set your expires headers, this should be standard for all your static content like CSS and Images as well. A browser may need to make many requests to your server in order to get all the content, by using an expires header you make those components cacheable for a set period of time, therefore the browser will need to make less HTTP requests. For a more detailed explanation, as well other components which need improving reading the <a href="http://developer.yahoo.com/performance/rules.html#expires">Yahoo Developer Network Guide on optimisation</a>.</p>  <h2>Loading Scripts Asynchronously</h2>  <p>Browsers are only single threaded, this means that it can only really load one thing at a time. However there are ways around this, and ways you can load multiple files without locking up the browser. Give Steve Souders articles on <a href="http://www.stevesouders.com/blog/2009/04/27/loading-scripts-without-blocking/">Loading Scripts without Blocking</a> if you are interested in implementing this. I am currently working on a prototype based class to do this which will be published on this blog in the coming months.</p>  <h2>Defer JavaScript Loading</h2>  <p>Steve Souders talks about deferring JavaScript loading in his series about <a href="http://www.stevesouders.com/blog/2009/12/07/downloading-javascript-as-strings/">high performance websites</a>. It’s quite a simple idea really, don’t load up the JavaScript until you require it. Therefore if your JavaScript is not needed on page load this should be deferred to be loaded up later.</p>  <h2>Evaluate</h2>  <p>Make sure you evaluate your performance when trying to optimize JavaScript. I personally love the Firefox plugin <a href="http://getfirebug.com">FireBug</a>, and it’s plugin <a href="http://developer.yahoo.com/yslow/">YSlow</a>. However there are lots of other methods and tools you can use to evaluate you performance, the best by far is the firebug profiler. <a href="http://michaelsync.net/2007/09/10/firebug-tutorial-logging-profiling-and-commandline-part-ii">Micheal Sync</a> has a fantastic tutorial on the FireBug profiler which is well worth a read.</p>
