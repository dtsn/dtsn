--- 
meta: 
  _edit_lock: "1264371469"
  _clicky_tweetpost: ""
  _clicky_goal: a:2:{s:2:"id";s:0:"";s:5:"value";s:0:"";}
  _edit_last: "2"
title: Prototype Tooltip
published: false
tags: []

layout: post
type: post
status: draft
---
/**
 * @desc Shows a tooltip next to the element
 * @param {Object} element
 * @param {Object} options
 */
var Bubble = Class.create(Configurable, {

	initialize: function(element, options) {
		this.element = $(element);
		this.options = this.setOptions(options);
		this.addObservers();
	},

	addObservers: function() {
		this.observers = {
			mouseOver:
				function() {
					if (!this.id) this.create();
					$(this.id).show();
				}.bind(this),
			mouseOut: this.onMouseOut.bind(this)
		}
		this.element.observe('mouseover', this.observers.mouseOver);
		this.element.observe('mouseout', this.observers.mouseOut);
	},

	create: function() {
		var bubble = new Element('div', {'class' : this.options.className}).update('<p>' + this.options.text + '</p>');
		// correctly place it
		var offset = this.element.cumulativeOffset();

		bubble.setStyle({
			'top':offset.top + 'px',
			'left':offset.left + 'px'
		});

		// add it to the body
		$(document.body).appendChild(bubble);
		// get the id
		this.id = bubble.identify();
		bubble.observe('mouseout', this.observers.mouseOut);
	},

	onMouseOut: function(event) {
		var element = Event.element(event);
		if (event.relatedTarget == this.element || $(event.relatedTarget).hasClassName('bubble') || $(event.relatedTarget).up('.bubble')) {

		} else {
			$(this.id).hide();
		}
	},

	destroy: function() {
		this.element.stopObserving('mouseover', this.observers.mouseOver);
		this.element.stopObserving('mouseout', this.observers.mouseOut);
		this.element.remove();
	}
});

Bubble.DEFAULT_OPTIONS = {
	text: '',
	className: 'bubble',
	offsetTop: 17,
	offsetLeft: 0,
	effects: true
};

http://vandelaydesign.com/blog/tools/tooltips-scripts/
